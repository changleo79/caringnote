# 🎯 Vercel 환경 변수 설정 가이드 (단계별)

## 현재 상황
- ✅ 코드 수정 완료
- ✅ 오류 메시지 정상 표시
- ❌ Vercel 환경 변수 미설정

---

## 📋 단계별 설정 방법

### Step 1: Vercel 대시보드 접속

1. 브라우저에서 접속:
   ```
   https://vercel.com/dashboard
   ```

2. 로그인 (GitHub 계정으로 로그인)

3. 프로젝트 목록에서 **`caringnote`** 클릭

---

### Step 2: 환경 변수 메뉴로 이동

1. 상단 메뉴에서 **"Settings"** 클릭
2. 왼쪽 사이드바에서 **"Environment Variables"** 클릭

---

### Step 3: NEXTAUTH_SECRET 추가

#### 3-1. 비밀키 생성

**방법 A: 온라인 생성기 (추천)**
1. 새 탭에서 접속:
   ```
   https://generate-secret.vercel.app/32
   ```
2. 생성된 긴 문자열 **전체 복사** (Ctrl+C)

**방법 B: PowerShell**
```powershell
[Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Minimum 0 -Maximum 256 }))
```
결과를 복사

#### 3-2. Vercel에 추가

1. **"Add New"** 버튼 클릭 (또는 "Add" 버튼)
2. 입력:
   - **Key**: `NEXTAUTH_SECRET`
   - **Value**: 위에서 복사한 비밀키 붙여넣기
   - **Environment**: 
     - ✅ Production
     - ✅ Preview  
     - ✅ Development
     - (모두 체크!)
3. **"Save"** 클릭

---

### Step 4: NEXTAUTH_URL 확인/추가

1. 다시 **"Add New"** 버튼 클릭
2. 입력:
   - **Key**: `NEXTAUTH_URL`
   - **Value**: `https://caringnote.vercel.app`
   - **Environment**: 
     - ✅ Production
     - ✅ Preview
     - ✅ Development
     - (모두 체크!)
3. **"Save"** 클릭

---

### Step 5: 확인

환경 변수 목록에서 다음 2개가 보여야 합니다:

```
NEXTAUTH_SECRET    [설정됨]
NEXTAUTH_URL       https://caringnote.vercel.app
```

---

### Step 6: 재배포 (가장 중요!)

**⚠️ 환경 변수 추가 후 반드시 재배포해야 합니다!**

#### 방법 1: Deployments에서 재배포

1. 상단 메뉴에서 **"Deployments"** 클릭
2. 가장 위에 있는 배포(최신) 클릭
3. 오른쪽 상단 **"..."** (3점 메뉴) 클릭
4. **"Redeploy"** 선택
5. 확인 창에서 **"Redeploy"** 다시 클릭
6. 배포 진행 상황 확인 (1-2분 소요)

#### 방법 2: Settings에서 재배포

1. **"Settings"** → **"General"**
2. 맨 아래 **"Redeploy"** 버튼 클릭

---

## ✅ 완료 확인

재배포 완료 후:

### 1. 환경 변수 확인
브라우저에서 접속:
```
https://caringnote.vercel.app/api/auth-check
```

**결과 확인:**
```json
{
  "nextAuth": {
    "secret": "✅ 설정됨",
    "url": "https://caringnote.vercel.app",
    "status": "✅ 정상"
  }
}
```

### 2. 로그인 페이지 확인
```
https://caringnote.vercel.app/auth/login
```

**확인 사항:**
- ❌ 빨간색 오류 배너가 사라짐
- ✅ 로그인 버튼이 "로그인"으로 정상 표시됨
- ✅ 로그인 가능

### 3. 로그인 테스트
회원가입한 계정으로 로그인 테스트

---

## 🔍 문제 해결

### 여전히 오류가 보이면:

1. **환경 변수가 설정되었는지 확인**
   - Settings → Environment Variables
   - NEXTAUTH_SECRET, NEXTAUTH_URL 확인

2. **재배포가 완료되었는지 확인**
   - Deployments 탭
   - 최신 배포가 "Ready" 상태인지 확인
   - 빌드 로그 확인 (오류 없는지)

3. **브라우저 새로고침**
   - Ctrl+Shift+R (강력 새로고침)
   - 또는 캐시 삭제

---

## 💡 팁

- 환경 변수는 **즉시 적용되지 않습니다**
- **반드시 재배포**해야 합니다
- 재배포는 1-2분 정도 소요됩니다
- 배포 완료 후에도 브라우저 캐시 때문에 이전 페이지가 보일 수 있습니다

---

**환경 변수 설정 + 재배포 = 완료!** 🚀

