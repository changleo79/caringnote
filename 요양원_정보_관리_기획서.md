# 요양원 정보 관리 프로세스 기획서

## 📋 개요

사용자가 요양원 정보를 확인하고 관리할 수 있는 완전한 프로세스를 제공합니다.

---

## 🎯 목표

1. **요양원 정보 조회**: 현재 속한 요양원 정보 확인
2. **요양원 정보 수정**: ADMIN/CAREGIVER가 요양원 정보 수정
3. **요양원 연결**: FAMILY 회원이 입소자 연결 후 요양원 정보 확인
4. **UX 개선**: 요양원 정보가 없을 때 명확한 안내 및 설정 유도

---

## 👥 사용자 시나리오

### 시나리오 1: CAREGIVER/ADMIN - 요양원 정보 확인 및 수정
1. 로그인 후 "요양원 정보" 메뉴 클릭
2. 현재 속한 요양원 정보 확인 (이름, 주소, 연락처, 설명 등)
3. "정보 수정" 버튼 클릭하여 정보 수정
4. 수정 완료

### 시나리오 2: FAMILY - 요양원 정보 확인
1. 로그인 후 입소자와 연결됨
2. "요양원 정보" 메뉴 클릭
3. 입소자가 속한 요양원 정보 확인
4. 요양원 연락처로 문의 가능

### 시나리오 3: 요양원 정보가 없는 경우
1. CAREGIVER/ADMIN이 로그인했지만 요양원 정보가 없음
2. 명확한 안내 메시지와 함께 "요양원 설정하기" 버튼 제공
3. 요양원 정보 입력 페이지로 이동
4. 요양원 정보 입력 및 저장

---

## 🏗️ 구현 사항

### 1. API 엔드포인트

#### GET `/api/care-centers/[id]`
- 요양원 정보 조회
- 권한: 본인의 요양원 또는 연결된 입소자의 요양원

#### PATCH `/api/care-centers/[id]`
- 요양원 정보 수정
- 권한: ADMIN 또는 해당 요양원의 CAREGIVER

### 2. 페이지

#### `/care-center` - 요양원 정보 페이지
- 요양원 정보 조회 (이름, 주소, 전화번호, 이메일, 설명, 로고)
- ADMIN/CAREGIVER만 수정 버튼 표시
- FAMILY는 조회만 가능

#### `/care-center/edit` - 요양원 정보 수정 페이지
- ADMIN/CAREGIVER만 접근 가능
- 요양원 정보 수정 폼
- 이미지 업로드 (로고) - 추후 구현, 현재는 URL 입력

### 3. UI 개선

#### 요양원 정보가 없을 때
- 명확한 안내 메시지
- "요양원 설정하기" 버튼 제공
- 요양원 정보 입력 페이지로 이동 유도

#### 사이드바 메뉴
- "요양원 정보" 메뉴 추가
- 아이콘: 🏥 또는 Building2

---

## 📐 데이터 구조

### CareCenter 모델 (기존)
```prisma
model CareCenter {
  id          String   @id @default(cuid())
  name        String   // 요양원 이름
  address     String   // 주소
  phone       String?  // 전화번호
  email       String?  // 이메일
  description String?  // 설명
  logoUrl     String?  // 로고 URL
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
```

---

## 🔐 권한 관리

### 조회 권한
- **ADMIN/CAREGIVER**: 자신이 속한 요양원 정보 조회 가능
- **FAMILY**: 연결된 입소자가 속한 요양원 정보 조회 가능

### 수정 권한
- **ADMIN**: 모든 요양원 정보 수정 가능
- **CAREGIVER**: 자신이 속한 요양원 정보만 수정 가능
- **FAMILY**: 수정 불가

---

## 📱 페이지 구성

### 1. 요양원 정보 페이지 (`/care-center`)

#### 레이아웃
```
┌─────────────────────────────────────┐
│  요양원 정보                         │
│  [수정 버튼] (ADMIN/CAREGIVER만)   │
├─────────────────────────────────────┤
│  ┌───────────────────────────────┐ │
│  │  [로고 이미지]                │ │
│  │  요양원 이름                  │ │
│  │  📍 주소                      │ │
│  │  📞 전화번호                  │ │
│  │  ✉️ 이메일                    │ │
│  │  📝 설명                      │ │
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘
```

#### 요양원 정보가 없을 때
```
┌─────────────────────────────────────┐
│  요양원 정보가 필요합니다           │
│                                     │
│  요양원 정보를 설정하여 서비스를    │
│  시작할 수 있습니다.                │
│                                     │
│  [요양원 설정하기] 버튼            │
└─────────────────────────────────────┘
```

### 2. 요양원 정보 수정 페이지 (`/care-center/edit`)

```
┌─────────────────────────────────────┐
│  요양원 정보 수정                   │
├─────────────────────────────────────┤
│  요양원 이름 *                      │
│  [입력 필드]                        │
│                                     │
│  주소 *                             │
│  [입력 필드]                        │
│                                     │
│  전화번호                           │
│  [입력 필드]                        │
│                                     │
│  이메일                             │
│  [입력 필드]                        │
│                                     │
│  로고 URL                           │
│  [입력 필드]                        │
│                                     │
│  설명                               │
│  [텍스트 영역]                      │
│                                     │
│  [취소] [저장] 버튼                │
└─────────────────────────────────────┘
```

---

## 🔄 프로세스 플로우

### 프로세스 1: 요양원 정보 조회

```
사용자 로그인
    ↓
사이드바 "요양원 정보" 클릭
    ↓
요양원 정보 확인
    ├─ ADMIN/CAREGIVER → 수정 버튼 표시
    └─ FAMILY → 조회만 가능
```

### 프로세스 2: 요양원 정보 수정

```
요양원 정보 페이지
    ↓
"수정" 버튼 클릭 (ADMIN/CAREGIVER)
    ↓
요양원 정보 수정 페이지
    ↓
정보 입력 및 저장
    ↓
요양원 정보 페이지로 리다이렉트
```

### 프로세스 3: 요양원 정보 설정 (처음)

```
로그인
    ↓
요양원 정보가 없음
    ↓
"요양원 설정하기" 클릭
    ↓
요양원 정보 입력 페이지
    ↓
정보 입력 및 저장
    ↓
요양원 정보 페이지로 리다이렉트
```

---

## ✅ 체크리스트

### API 개발
- [ ] GET `/api/care-centers/[id]` 구현
- [ ] PATCH `/api/care-centers/[id]` 구현
- [ ] 권한 검증 로직 구현

### 페이지 개발
- [ ] `/care-center` 페이지 구현
- [ ] `/care-center/edit` 페이지 구현
- [ ] 요양원 정보가 없을 때 안내 UI 구현

### UI 개선
- [ ] 사이드바에 "요양원 정보" 메뉴 추가
- [ ] 요양원 정보가 없을 때 명확한 안내 메시지
- [ ] "요양원 설정하기" 버튼 추가

### 기타
- [ ] 입력 검증 로직 구현
- [ ] 에러 처리 구현
- [ ] 성공 메시지 표시

---

## 🎨 디자인 가이드

### 색상
- 주요 색상: Primary 색상 사용
- 버튼: Primary 색상 (수정), Gray (취소)

### 아이콘
- 요양원: Building2 (Lucide React)
- 주소: MapPin
- 전화번호: Phone
- 이메일: Mail
- 설명: FileText

### 레이아웃
- 카드 형태의 깔끔한 디자인
- 반응형 디자인 (모바일/태블릿/데스크톱)

---

## 📝 향후 개선 사항

1. **로고 이미지 업로드**: 현재는 URL 입력, 추후 파일 업로드 기능 추가
2. **요양원 통계**: 요양원별 입소자 수, 회원 수 등 통계 표시
3. **요양원 설정**: 운영 시간, 공지사항 등 추가 설정
4. **요양원 전환**: 여러 요양원에 소속된 경우 전환 기능

---

**기획 완료일**: 2024-12-19

